<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì‚¼êµ­ì‹œëŒ€ ì „ì„±ê¸° ì¸í„°ë™í‹°ë¸Œ ë§µ</title>
    <style>
        body {
            font-family: 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f8f9fa;
            padding: 20px;
            color: #333;
        }
        h2 { margin-bottom: 10px; color: #2c3e50; }
        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            max-width: 800px;
        }
        /* ìº”ë²„ìŠ¤ ì˜ì—­ */
        #canvasContainer {
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            border-radius: 15px;
            overflow: hidden;
            background: white;
        }
        canvas {
            display: block;
            max-width: 100%;
            height: auto;
        }
        /* ì»¨íŠ¸ë¡¤ ë²„íŠ¼ */
        .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        button {
            padding: 12px 20px;
            font-size: 15px;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .btn-4c { background-color: #f1c40f; color: #000; } /* ë°±ì œ */
        .btn-5c { background-color: #e74c3c; color: #fff; } /* ê³ êµ¬ë ¤ */
        .btn-6c { background-color: #3498db; color: #fff; } /* ì‹ ë¼ */
        .btn-reset { background-color: #95a5a6; color: #fff; }

        button:hover { transform: translateY(-2px); opacity: 0.9; }
        button.active { outline: 3px solid #333; }

        /* ì•ˆë‚´ ë©”ì‹œì§€ */
        .hint {
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 8px;
            padding: 10px 15px;
            font-size: 14px;
            color: #856404;
            text-align: center;
        }

        /* ì§ˆë¬¸ ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        .question-section {
            width: 100%;
            margin-top: 30px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        details {
            margin-bottom: 15px;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        summary {
            font-weight: bold;
            cursor: pointer;
            color: #2c3e50;
            padding: 5px;
        }
        summary:hover { color: #3498db; }
        .answer {
            padding: 10px 15px;
            background: #fdfdfd;
            border-left: 4px solid #3498db;
            margin-top: 10px;
            line-height: 1.6;
        }
        .highlight { font-weight: bold; color: #e74c3c; }
    </style>
</head>
<body>

    <h2>ğŸ—ºï¸ ì‚¼êµ­ ì „ì„±ê¸° ì˜í†  ë³€í™”ì™€ í•œê°•</h2>
    
    <div class="container">
        <div id="canvasContainer">
            <canvas id="mapCanvas" width="800" height="1000"></canvas>
        </div>

        <div class="controls">
            <button class="btn-4c" onclick="toggleLayer('4c')">4ì„¸ê¸° ë°±ì œ (ê·¼ì´ˆê³ ì™•)</button>
            <button class="btn-5c" onclick="toggleLayer('5c')">5ì„¸ê¸° ê³ êµ¬ë ¤ (ì¥ìˆ˜ì™•)</button>
            <button class="btn-6c" onclick="toggleLayer('6c')">6ì„¸ê¸° ì‹ ë¼ (ì§„í¥ì™•)</button>
            <button class="btn-reset" onclick="resetLayers()">ëª¨ë‘ ì§€ìš°ê¸°</button>
        </div>

        <div class="hint" id="hintBox">
            ğŸ’¡ ì„¸ ë²„íŠ¼ì„ ëª¨ë‘ í´ë¦­í•˜ë©´ <strong>í•œê°• ìœ ì—­</strong>ì´ ì™œ ì¤‘ìš”í–ˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”!
        </div>

        <div class="question-section">
            <h3>ğŸ’¡ íƒêµ¬ ì§ˆë¬¸ ë¦¬ìŠ¤íŠ¸ (í´ë¦­í•˜ì—¬ í™•ì¸)</h3>
            
            <details>
                <summary>ğŸŸ¢ [ê³µí†µ] ì„¸ ì§€ë„ê°€ ê²¹ì¹˜ëŠ” ê°€ì¥ ì§„í•œ ê³³ì€?</summary>
                <div class="answer">ê°€ì¥ ì§„í•˜ê²Œ ìƒ‰ì´ ê²¹ì¹˜ëŠ” ì§€ì—­ì€ ë°”ë¡œ <span class="highlight">í•œê°• ìœ ì—­</span>ì…ë‹ˆë‹¤. ì´ê³³ì€ í† ì§€ê°€ ë¹„ì˜¥í•˜ê³ , ë¬¼ìê°€ í’ë¶€í•˜ë©°, ì¤‘êµ­ê³¼ì˜ êµë¥˜ì— ìœ ë¦¬í•œ í•´ìƒ í†µë¡œì˜€ê¸° ë•Œë¬¸ì— ì‚¼êµ­ì´ ê°€ì¥ ì¹˜ì—´í•˜ê²Œ ë‹¤íˆ¬ì—ˆë˜ 'ì „ì„±ê¸°ì˜ ìƒì§•'ì´ì—ˆìŠµë‹ˆë‹¤.</div>
            </details>

            <details>
                <summary>ğŸŸ¡ [4ì„¸ê¸° ë°±ì œ] í•œê°•ì€ ë°±ì œì—ê²Œ ì–´ë–¤ ì˜ë¯¸ì˜€ì„ê¹Œìš”?</summary>
                <div class="answer">ë°±ì œëŠ” í•œê°• ìœ ì—­ì—ì„œ ê±´êµ­ë˜ì—ˆìŠµë‹ˆë‹¤. ì§€ë„ë¥¼ ë³´ë©´ í•œê°•ì„ í†µí•´ ì„œí•´ë¡œ ë°”ë¡œ ë‚˜ê°ˆ ìˆ˜ ìˆì£ ? ì´ë¥¼ í†µí•´ ì¤‘êµ­ì˜ ë™ì§„, ì¼ë³¸ì˜ ì™œì™€ í™œë°œíˆ êµë¥˜í•˜ë©° í•´ìƒ ê°•êµ­ìœ¼ë¡œ ì„±ì¥í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</div>
            </details>

            <details>
                <summary>ğŸ”´ [5ì„¸ê¸° ê³ êµ¬ë ¤] ìˆ˜ë„ë¥¼ í‰ì–‘ìœ¼ë¡œ ì˜®ê¸´ ì´ìœ ëŠ”?</summary>
                <div class="answer">ì¥ìˆ˜ì™•ì˜ 'ë‚¨ì§„ ì •ì±…' ë•Œë¬¸ì…ë‹ˆë‹¤. ì§€ë„ë¥¼ ê²¹ì³ë³´ë©´ ê³ êµ¬ë ¤ ì˜í† ê°€ í•œê°• ì´ë‚¨ê¹Œì§€ ê¹Šìˆ™ì´ ë‚´ë ¤ì˜¤ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°±ì œëŠ” ì´ë•Œ ìˆ˜ë„ í•œì„±ì„ ë¹¼ì•—ê¸°ê³  ì›…ì§„(ê³µì£¼)ìœ¼ë¡œ ì«“ê²¨ë‚˜ê²Œ ë©ë‹ˆë‹¤.</div>
            </details>

            <details>
                <summary>ğŸ”µ [6ì„¸ê¸° ì‹ ë¼] ì‹ ë¼ì˜ í•œê°• ì ë ¹ì´ ê°€ì ¸ì˜¨ ë³€í™”ëŠ”?</summary>
                <div class="answer">ì‹ ë¼ëŠ” í•œê°•ì„ ì°¨ì§€í•¨ìœ¼ë¡œì¨ ê³ êµ¬ë ¤ì™€ ë°±ì œì˜ ì—°ê²°ì„ ì°¨ë‹¨í•˜ê³ , ì¤‘êµ­ ë‹¹ë‚˜ë¼ì™€ ì§ì ‘ ì†Œí†µí•  ìˆ˜ ìˆëŠ” 'ë‹¹í•­ì„±' ê¸¸ì„ ì—´ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” í›—ë‚  ì‹ ë¼ê°€ ì‚¼êµ­ì„ í†µì¼í•˜ëŠ” ê²°ì •ì ì¸ ê²½ì œì Â·ì™¸êµì  ê¸°ë°˜ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.</div>
            </details>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('mapCanvas');
        const ctx = canvas.getContext('2d');
        const hintBox = document.getElementById('hintBox');

        // ë ˆì´ì–´ ìƒíƒœ
        let layers = { '4c': false, '5c': false, '6c': false };

        // ì´ë¯¸ì§€ ê°ì²´ ìƒì„± ë° ë¡œë“œ
        const imgBase = new Image(); imgBase.src = '4.png'; // í•´ì•ˆì„ /ê¸°ë³¸
        const img4c = new Image();   img4c.src = '2.png';   // 4ì„¸ê¸° ë°±ì œ
        const img5c = new Image();   img5c.src = '3.png';   // 5ì„¸ê¸° ê³ êµ¬ë ¤
        const img6c = new Image();   img6c.src = '1.png';   // 6ì„¸ê¸° ì‹ ë¼

        const allImages = [imgBase, img4c, img5c, img6c];
        let loadedCount = 0;

        allImages.forEach(img => {
            img.onload = () => {
                loadedCount++;
                if (loadedCount === allImages.length) drawCanvas();
            };
        });

        function toggleLayer(era) {
            layers[era] = !layers[era];
            // ë²„íŠ¼ í™œì„±í™” ìŠ¤íƒ€ì¼ ì œì–´
            event.target.classList.toggle('active');
            drawCanvas();
            updateHint();
        }

        function resetLayers() {
            layers = { '4c': false, '5c': false, '6c': false };
            document.querySelectorAll('.controls button').forEach(btn => btn.classList.remove('active'));
            drawCanvas();
            updateHint();
        }

        function updateHint() {
            const allSelected = layers['4c'] && layers['5c'] && layers['6c'];
            if (allSelected) {
                hintBox.innerHTML = 'â­ <strong>í•œê°• ìœ ì—­</strong>ì´ ì‚¼êµ­ ëª¨ë‘ì˜ ì „ì„±ê¸° ì˜í† ì— í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤!';
                hintBox.style.background = '#d4edda';
                hintBox.style.borderColor = '#28a745';
                hintBox.style.color = '#155724';
            } else {
                hintBox.innerHTML = 'ğŸ’¡ ì„¸ ë²„íŠ¼ì„ ëª¨ë‘ í´ë¦­í•˜ë©´ <strong>í•œê°• ìœ ì—­</strong>ì´ ì™œ ì¤‘ìš”í–ˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”!';
                hintBox.style.background = '#fff3cd';
                hintBox.style.borderColor = '#ffc107';
                hintBox.style.color = '#856404';
            }
        }

        function drawHanRiverLabel() {
            ctx.save();
            
            // í•œê°• ë¼ë²¨ (í™©ê¸ˆìƒ‰ ë°°ê²½ - ì–´ë‘ìš´ ê²¹ì¹¨ ì˜ì—­ì—ì„œ ì˜ ë³´ì„)
            ctx.font = 'bold 18px Apple SD Gothic Neo, Malgun Gothic, sans-serif';
            const labelX = 350;
            const labelY = 610;
            const labelText = 'í•œê°•';
            const textWidth = ctx.measureText(labelText).width;
            
            // ë¼ë²¨ ë°°ê²½ (í™©ê¸ˆìƒ‰)
            ctx.fillStyle = '#FFD700';
            ctx.beginPath();
            ctx.roundRect(labelX - 10, labelY - 18, textWidth + 20, 28, 4);
            ctx.fill();
            
            // ë¼ë²¨ í…Œë‘ë¦¬ (ì§™ì€ ê¸ˆìƒ‰ìœ¼ë¡œ ì…ì²´ê°)
            ctx.strokeStyle = '#DAA520';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.roundRect(labelX - 10, labelY - 18, textWidth + 20, 28, 4);
            ctx.stroke();
            
            // ë¼ë²¨ í…ìŠ¤íŠ¸ (ì§„í•œ íšŒìƒ‰)
            ctx.fillStyle = '#212121';
            ctx.fillText(labelText, labelX, labelY);
            
            ctx.restore();
        }

        function drawOverlapHighlight() {
            ctx.save();
            
            // ê²¹ì¹¨ ì˜ì—­ ì ì„  í…Œë‘ë¦¬ (ì£¼í™©ìƒ‰ + í°ìƒ‰ glow)
            ctx.setLineDash([10, 5]);
            ctx.strokeStyle = '#FF5722';
            ctx.lineWidth = 4;
            ctx.shadowColor = 'rgba(255, 255, 255, 0.9)';
            ctx.shadowBlur = 6;
            
            ctx.beginPath();
            ctx.ellipse(400, 610, 100, 70, 0, 0, Math.PI * 2);
            ctx.stroke();
            
            // shadow ì´ˆê¸°í™”
            ctx.shadowBlur = 0;
            ctx.setLineDash([]);
            
            // "ì „ëµì  ìš”ì¶©ì§€" ë¼ë²¨ (ì²­íšŒìƒ‰ ë°°ê²½)
            ctx.font = 'bold 18px Apple SD Gothic Neo, Malgun Gothic, sans-serif';
            const labelX = 325;
            const labelY = 715;
            const labelText = 'â­ ì „ëµì  ìš”ì¶©ì§€';
            const textWidth = ctx.measureText(labelText).width;
            
            // ë¼ë²¨ ë°°ê²½ (ì²­íšŒìƒ‰)
            ctx.fillStyle = '#37474F';
            const padding = 10;
            ctx.beginPath();
            ctx.roundRect(labelX - padding, labelY - 20, textWidth + padding * 2, 32, 6);
            ctx.fill();
            
            // ë¼ë²¨ í…Œë‘ë¦¬ (ì‚´ì§ ë°ì€ í…Œë‘ë¦¬ë¡œ ì…ì²´ê°)
            ctx.strokeStyle = '#546E7A';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.roundRect(labelX - padding, labelY - 20, textWidth + padding * 2, 32, 6);
            ctx.stroke();
            
            // ë¼ë²¨ í…ìŠ¤íŠ¸ (í™©ê¸ˆìƒ‰ - í•œê°• ë¼ë²¨ê³¼ í†µì¼ê°)
            ctx.fillStyle = '#FFD700';
            ctx.fillText(labelText, labelX, labelY);
            
            ctx.restore();
        }

        function drawCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // 1. ê¸°ë³¸ ë² ì´ìŠ¤ ì§€ë„ ê·¸ë¦¬ê¸°
            ctx.globalAlpha = 1.0;
            ctx.globalCompositeOperation = 'source-over';
            ctx.drawImage(imgBase, 0, 0, canvas.width, canvas.height);

            // 2. í•œê°• ë¼ë²¨ ê·¸ë¦¬ê¸° (í•­ìƒ í‘œì‹œ)
            drawHanRiverLabel();

            // 3. ì˜í†  ë ˆì´ì–´ (íˆ¬ëª…ë„ ì ìš©)
            ctx.globalAlpha = 0.5;
            ctx.globalCompositeOperation = 'multiply';

            if (layers['4c']) ctx.drawImage(img4c, 0, 0, canvas.width, canvas.height);
            if (layers['5c']) ctx.drawImage(img5c, 0, 0, canvas.width, canvas.height);
            if (layers['6c']) ctx.drawImage(img6c, 0, 0, canvas.width, canvas.height);

            // 4. í•©ì„± ëª¨ë“œ ì´ˆê¸°í™”
            ctx.globalCompositeOperation = 'source-over';
            ctx.globalAlpha = 1.0;

            // 5. ëª¨ë‘ ì„ íƒ ì‹œ ê²¹ì¹¨ ì˜ì—­ ê°•ì¡°
            if (layers['4c'] && layers['5c'] && layers['6c']) {
                drawOverlapHighlight();
            }
        }
    </script>
</body>
</html>